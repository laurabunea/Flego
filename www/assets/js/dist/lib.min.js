/*! freds-precious 2014-04-16 */
window.Browser=function(a){var b={clickEvent:function(){return"ontouchstart"in a?"touchend":"click"},cssPrefix:function(){for(var a=document.createElement("div"),b=["Webkit","Moz","O","ms"],c=0;c<b.length;c++)if(b[c]+"Transition"in a.style)return b[c];return"transition"in a.style?"":!1},getPrefixedCssProp:function(){var a=this.cssPrefix();return a?a=a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-"):!1},transitionEvent:function(){{var a,b=this.cssPrefix();this.getPrefixedCssProp(b)}switch(b){case"Moz":a="transitionend";break;case"Webkit":a="webkitTransitionEnd";break;case"O":a="oTransitionEnd";break;case"ms":a="MSTransitionEnd";break;case"":a="transitionend"}return a},animationEvent:function(){{var a,b=this.cssPrefix();this.getPrefixedCssProp(b)}switch(b){case"Moz":a="animationend";break;case"Webkit":a="webkitAnimationEnd";break;case"O":a="oAnimationEnd";break;case"ms":a="MSAnimationEnd";break;case"":a="animationend"}return a},_getHelper:function(a){if(!arguments.length)return!1;var b,c=this;return b=c[a],"function"==typeof b?b.call(c):!1}},c={modern:function(){return"querySelector"in document&&"localStorage"in a&&"addEventListener"in a}},d={tests:{},results:{},init:function(){var a=this;a.addTests(arguments.length?Tests:c)},_getResult:function(a){if(!arguments.length)return!1;var b=this;return b.results[a]},_run:function(a){var b=this,c=b.tests[a];"function"==typeof c&&(b.results[a]=c())},_remove:function(a){var b=this,c=b.tests[a],d=b.results[a];c&&(c=void 0),d&&(d=void 0)},addTests:function(a){if(!arguments.length)return!1;var b,c=this;switch(typeof a){case"object":for(var d in a)b=a[d],c.addTest(d,b);break;case"function":this.addTest("userTest",a);break;default:return!1}return this},runTests:function(){var a=this;if(!a.tests)return!1;for(var b in a.tests)a._run(b);return a.updateHtml(),a.results},updateHtml:function(){var a=this;for(var b in a.results)a.results[b]&&(document.documentElement.className+=" "+b);document.documentElement.className=document.documentElement.className.replace("no-js","js")},runTest:function(a){var b=this;b._run(a)},addTest:function(a,b){var c=this;c.tests[a]||(c.tests[a]=b)},removeTest:function(a){var b=this;return b._remove(a),!0},removeTests:function(){var a=this;return a.tests={},a.results={},!0}};return{features:function(){return d.results},is:function(a){return d._getResult(a)},has:function(a){return d._getResult(a)},supports:function(a){return d._getResult(a)},get:function(a){return b._getHelper(a)},removeTest:function(a){return d.removeTest(a)},removeTests:function(){return d.removeTests()},addTest:function(){return d.addTest()},addTests:function(a){return d.addTests(a)},runTest:function(a){return d.runTest(a)},runTests:function(){return d.runTests()},init:function(a){return d.init(a)}}}(window);var Tests=function(a){var b={responsive:function(){return"function"==typeof a.matchMedia?!0:!1},modern:function(){return"querySelector"in document&&"localStorage"in a&&"addEventListener"in a},touchEvents:function(){return"ontouchstart"in a},noTouchEvents:function(){return"ontouchstart"in a?!1:!0},placeholders:function(){return"placeholder"in document.createElement("input")},nativeOverflowScrolling:function(){var a=document.createElement("div");return a.setAttribute("style","-webkit-overflow-scrolling: touch;"),"touch"==a.style.webkitOverflowScrolling?!0:!1},mobile:function(){var a=navigator.userAgent.toLowerCase();return a.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?!0:!1},fixed:function(){var a=document.createElement("div"),b=document.documentElement;a.style.cssText="position:fixed;top:0;",b.appendChild(a);var c=0===a.offsetTop?!0:!1;return b.removeChild(a),c},sticky:function(){var a=document.createElement("div"),b=document.documentElement,c=!1,d=["webkit","moz","o",""];for(var e in d){var f=""==d[e]?"sticky":"-"+d[e]+"-sticky";if(a.style.position=f,b.appendChild(a),a.style.position===f){c=!0;break}b.removeChild(a)}return c},windowsPhoneMango:function(){return navigator.userAgent.match(/IEMobile9.0/)?!0:!1},retina:function(){var b="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return a.devicePixelRatio>1?!0:a.matchMedia&&a.matchMedia(b).matches?!0:!1},history:function(){return a.history&&a.history.pushState?!0:!1},tel:function(){var a=document.createElement("input");return a.setAttribute("type","tel"),"text"!==a.type},postMessage:function(){return!!a.postMessage},fileApi:function(){return"undefined"!=typeof FileReader},localStorage:function(){try{return"localStorage"in a&&null!==a.localStorage}catch(b){return!1}}};return b}(window,Browser);Browser.init(Tests),Browser.runTests();var Fancy=function(a){var b=function(a){"SELECT"===a.prop("tagName")?(a.children("option").attr("selected",!1),a.children("option:first-child").attr("selected",!0),a.trigger("change")):"TEXTAREA"===a.prop("tagName")?(a.html(""),a.trigger("change")):"INPUT"===a.prop("tagName")&&("checkbox"!==a.attr("type")&&"radio"!==a.attr("type")?a.val(""):a.attr("checked",!1),a.trigger("change"));var c=a.children();c.size()>0&&c.each(function(a,c){b($(c))})},c=function(){var b=function(){var b=a.documentElement;b.className=b.className.replace(/\bno-js\b/,"")+" js"},c=function(a){var b=this;return this.element="",this.input="",this.triggerElement="",arguments.length&&$.extend(b,a),b};return c.prototype={init:function(){var a=this,b=$(a.element);b.each(function(){var b=$(this),c=b;a.input&&(c=$(this).find(a.input)),c.on("change keyup",function(c){var d=c.target,e=$(d);a.updateState(e,b)}),a.triggerElement&&$(a.triggerElement,b).on("click",function(){c.trigger("click")}),a.onInputInitialize&&a.onInputInitialize.call(a,b,c),b.data("ignore-onload")||a.updateState(c,b)}),a.onInitialize&&a.onInitialize.call(a)},updateState:function(a,b){var c=this;c.onInputChange&&c.onInputChange.call(c,a,b)}},b(),c}(),d=function(a){var b=new a({element:"[data-select]",input:"select",activeClass:"select--loaded",debug:"foo",onInputInitialize:function(a,b){a.parent().addClass(self.activeClass),a.find("[data-select-label]").on("click",function(){b.focus()})},onInputChange:function(a){var b=a,c=b.get(0),d=b.prop("selectedIndex"),e="",f="&nbsp;",g=a.siblings("[data-select-label]").get(0);if(c.options.length){var h=c.options[d].text;""!==h&&(f=h)}e=f,g.innerHTML=e}});return b}(c),e=function(a){var b=new a({element:"[data-checkbox]",input:"input",triggerElement:".field_checkbox__fancy",activeClass:"field_checkbox--checked",onInputChange:function(a){var b=this,c=a.get(0),d=a.parent();c.checked?d.addClass(b.activeClass):d.removeClass(b.activeClass)}});return b}(c),f=function(a){var b=new a({element:"[data-radio]",input:"input",triggerElement:".field_radio__fancy",activeClass:"field_radio--checked",onInputChange:function(a){var b=this;$group=$("input:radio[name='"+a.attr("name")+"']"),$group.each(function(){el=$(this).get(0),$parent=$(this).parent(),el.checked?$parent.addClass(b.activeClass):$parent.removeClass(b.activeClass)})}});return b}(c),g=function(c){var d=new c({element:"[data-additional-trigger]",input:"select, input",debug:"bar",onInitialize:function(){var a=this,b=$(a.element).not("[data-additional-value]");b.on("click change",function(b){var c=b.currentTarget,d=$(c);d.data("hide-self")&&d.hide(),a.onInputChange.call(a,null,d)})},onInputChange:function(b,c){var d=this,e=c.data("additional-value"),f=c.data("additional-trigger"),g=b?!0:!1;if(g){var h=!1;"<"==e.toString().substring(0,1)?$.isNumeric(b.val())&&parseInt(b.val())<parseInt(e.substring(1))&&(h=!0):$.isNumeric(b.val())&&">"==e.toString().substring(0,1)?b.val()>e.substring(1)&&(h=!0):b.val()==e&&(h=!0)}else h=!0;h?d.showAdditional(f):d.hideAdditional(f),$(a).trigger("inputChange"+f)},showAdditional:function(a){$("[data-additional='"+a+"']").removeAttr("data-additional-hide")},hideAdditional:function(a){var b=$("[data-additional='"+a+"']");b.attr("data-additional-hide","true"),this.emptyValues(b)},emptyValues:function(a){b(a)}});return d}(c);$(a).ready(function(){d.init(),e.init(),f.init(),g.init()})}(document,window);!function(a,b){"function"==typeof define&&define.amd?define(function(){return a.MQ=b(a,a.MQ||{})}):a.MQ=b(a,a.MQ||{})}(this,function(a){return a.init=function(b){if(this.callbacks=[],this.new_context=this.context="","undefined"!=typeof b)for(i=0;i<b.length;i++)this.addQuery(b[i]);this.addEvent(window,"resize",a.listenForChange,a),this.listenForChange()},a.listenForChange=function(){var a;document.documentElement.currentStyle&&(a=document.documentElement.currentStyle.fontFamily),window.getComputedStyle&&(a=window.getComputedStyle(document.documentElement,null).getPropertyValue("font-family")),null!==a&&(a=a.replace(/['",]/g,""),a!==this.context&&(this.new_context=a,this.triggerCallbacks(this.context,"unmatch"),this.triggerCallbacks(this.new_context,"match")),this.context=this.new_context)},a.addQuery=function(a){return null!==a&&void 0!==a?(this.callbacks.push(a),"string"==typeof a.context&&(a.context=[a.context]),"boolean"!=typeof a.call_for_each_context&&(a.call_for_each_context=!0),""!==this.context&&this._inArray(this.context,a.context)&&a.match(),this.callbacks[this.callbacks.length-1]):void 0},a.removeQuery=function(b){if(null!==b&&void 0!==b)for(var c=-1;-1<(c=a._indexOf(b,this.callbacks));)this.callbacks.splice(c,1)},a.triggerCallbacks=function(a,b){var c,d;for(c=0;c<this.callbacks.length;c++)!1===this.callbacks[c].call_for_each_context&&("match"===b&&this._inArray(this.context,this.callbacks[c].context)||"unmatch"===b&&this._inArray(this.new_context,this.callbacks[c].context))||(d=this.callbacks[c][b],this._inArray(a,this.callbacks[c].context)&&void 0!==d&&d())},a.addEvent=function(a,b,c,d){null!==a&&void 0!==a&&(a.addEventListener?a.addEventListener(b,function(){c.call(d)},!1):a.attachEvent?a.attachEvent("on"+b,function(){c.call(d)}):a["on"+b]=function(){c.call(d)})},a.getPreviousContext=function(){return this.context},a.getContext=function(){return this.new_context},a._inArray=function(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d]==a)return!0;return!1},a._indexOf=function(a,b,c){var d;if(b){if(b.indexOf)return b.indexOf(a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},a});var QuickTube=function(){var a=function(){return/Apple.*Mobile.*Safari/.test(navigator.userAgent)},b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c),window.onYouTubeIframeAPIReady=function(){$(document).ready(function(){QuickTube.init()})};var d={_settings:"?autoplay=1&showinfo=0&autohide=1&color=white&enablejsapi=1&playerapiid=ytplayer&wmode=transparent",_domain:"http://www.youtube.com/embed/",_players:{},className:"quicktube__iframe",activeClass:"quicktube--playing",pausedClass:"quicktube--paused",posterFrameHiddenClass:"quicktube__poster--hidden",supportsTransitions:"transition"in document.body.style||"webkitTransition"in document.body.style||"MozTransition"in document.body.style||"msTransition"in document.body.style||"OTransition"in document.body.style,setExplicitFrameHeight:!1,init:function(){var a=this;return $("[data-quicktube-play]").on("click",function(){a.onClick.call(a,$(this))}),$("[data-quicktube-stop]").on("click",function(){var b=$(this).data("quicktube-stop");a.stopVideo.call(a,b)}),this},onClick:function(b){var c=this,d=b.data("quicktube-play"),e=$('[data-quicktube="'+d+'"]'),f=e.find("[data-quicktube-video]"),g=$("iframe."+c.className,f),h=f.data("quicktube-video"),i=e.find("[data-quicktube-poster]"),j=function(a){a.data==YT.PlayerState.ENDED&&c.stopVideo.call(c,d)},k=function(b){a()||(e.data("video-playing")?c.stopVideo.call(c,d):(e.data("video-playing",!0),b.target.playVideo()))};g.length||(g=c.getIframePlayer(h,e,d),f.html(g),this.jamesPlayer=new YT.Player(d,{events:{onStateChange:j,onReady:k}})),a()||this.jamesPlayer.playVideo&&this.jamesPlayer.playVideo(),c.setExplicitFrameHeight&&g.height(e.outerHeight()),e.data("video-playing")||(c.hidePosterFrame(i),c._players[d]=e,e.addClass(c.activeClass).removeClass(c.pausedClass),$(window).trigger("quicktube:play",d,e))},hidePosterFrame:function(a){var b=this;a.addClass(b.posterFrameHiddenClass),b.supportsTransitions||a.fadeOut(300)},showPosterFrame:function(a){var b=this;a.removeClass(b.posterFrameHiddenClass),b.supportsTransitions||a.fadeIn(300)},getIframePlayer:function(a,b,c){var d=this,e=d._domain+e+d._settings,f=document.createElement("iframe");return f.src=d._domain+a+d._settings,f.width="100%",f.id=c,f.className=this.className,$(f)},stopVideo:function(a){{var b=this,c=$('[data-quicktube="'+a+'"]');c.find("iframe")}this.jamesPlayer.pauseVideo(),c.removeClass(b.activeClass).addClass(b.pausedClass),b.showPosterFrame(c.find("[data-quicktube-poster]")),c.data("video-playing",!1),b._players[a]=!1,$(window).trigger("quicktube:pause",a,c)}};return d}();!function(a,b){"use strict";a.ShowHide=function(){var c=function(a,b,c){var d=this;this.$container=a,this.$triggers=b,this.activeClass="showhide-open",this.triggerClass="showhide-active",this.animInClass=!1,this.animOutClass=!1,this.autoHeight=!1,this.activateModal=!1,this.animEvent=Browser.get("animationEvent"),$.extend(d,c),this.isOpen=a.hasClass(this.activeClass)?!0:!1,this.$triggers&&this.$triggers.on("click",$.proxy(d.onClick,d))};return c.prototype={onClick:function(a){a.preventDefault();var b=this;b.isOpen?b.close(a):b.open(a)},open:function(c){var d=this,e=this.$container.hasClass(this.activeClass)?!1:!0,f=this.$container.attr("data-showhide-group"),g=this.$container.attr("data-showhide-dismissible"),h=$(b);if(d.$container.removeClass(d.animOutClass),d.$container.addClass(d.activeClass),d.autoHeight){d.$container.addClass("autoheight"),d.$container.css("height","auto"),d.realHeight=d.$container.outerHeight();var i=d.realHeight+"px";d.$container.css("height",i),$(a).one("resize",function(){d.$container.css("height","auto").removeClass("autoheight").off(Browser.get("transitionEvent"))})}return d.animInClass&&d.animEvent&&(d.$container.one(this.animEvent,function(){d.$container.removeClass(d.animInClass)}),d.$container.addClass(d.animInClass)),this.$triggers.each(function(){var a=$(this);a.addClass(d.triggerClass),"undefined"!=typeof a.attr("data-hide-self")&&a.hide()}),f&&h.trigger("showHide:closeGroup",[f,d.alias]),"undefined"!=typeof g&&(c.stopPropagation(),this.$container.on("click",function(a){a.stopPropagation()}),h.one("click",function(){d.close.call(d)})),h.trigger("showHide:open",[d]),this.isOpen=!0,e},close:function(){var a=this,c=$(b),d=this.$container.hasClass(this.activeClass)?!0:!1;return a.animOutClass&&this.animEvent?(this.$container.one(this.animEvent,function(){a.$container.removeClass(a.animOutClass),a.$container.removeClass(a.activeClass)}),a.$container.removeClass(a.animInClass),a.$container.addClass(a.animOutClass)):a.autoHeight&&a.$container.hasClass("autoheight")?(a.$container.css("height","0px"),a.$container.one(Browser.get("transitionEvent"),function(){a.$container.removeClass(a.activeClass)})):a.$container.removeClass(a.activeClass),this.$triggers.each(function(){var b=$(this);b.removeClass(a.triggerClass),"undefined"!=typeof b.attr("data-hide-self")&&b.show()}),c.trigger("showHide:close",[a]),this.$container.off("click",function(a){a.stopPropagation()}),c.off("click",function(){a.close.call(a)}),this.isOpen=!1,d},remove:function(){var a=this;this.$container=null,this.$triggers.off("click",$.proxy(a.onClick,a))}},c}(),a.ShowHideController=function(){return{showHides:{},init:function(){var a=this;a.add($("[data-showhide-container]")),$(b).on("showHide:closeGroup",function(b,c,d){a.closeGroup.call(a,c,d)})},add:function(a){var b=this;a.each(function(a,c){var d,e=$(c),f=e.data("showhide-container"),g=e.data("showhide-group"),h=$("[data-showhide-trigger='"+f+"']"),i=e.data("showhide-activeclass"),j=e.data("showhide-in"),k=e.data("showhide-out"),l=e.data("showhide-triggerclass"),m="undefined"!=typeof e.data("showhide-autoheight");d={alias:f,group:g,activeClass:i,triggerClass:l,animInClass:j,animOutClass:k,autoHeight:m},b.showHides[f]=new ShowHide(e,h,d)})},closeGroup:function(a,b){var c,d=this;for(var e in d.showHides)c=d.showHides[e],c.group===a&&c.alias!==b&&c.close()}}}(),$(b).ready(function(){ShowHideController.init()})}(window,document);var Teflon=function(){var a={selector:"[data-teflon]",carousels:[],init:function(){var a=this,b=$(a.selector);b.each(function(){a.add($(this))}),b=null,$(window).on("teflon:next",$.proxy(a.delegateMethod,a))},add:function(a){var b=this,c=a.data("teflon"),d=new g({$el:a,items:c,id:b.carousels.length});return b.carousels.push(d),c=null,d},remove:function(a){var b=this,c=!1;a||(c=!0);for(var d=0;d<b.carousels.length;d++){var e=b.carousels[d];(c||e.$el===a)&&e.remove(),b.carousels.splice(d,1)}},delegateMethod:function(a,b){for(var c=this,d=a.type?a.type.replace("teflon:",""):"next",e=0;e<c.carousels.length;e++){var f=c.carousels[e];f.domId===b&&f[d]()}}},b=function(a,b,c,d){return a.bind("load error onreadystatechange",function(b){"error"!==b.type?c&&c():d&&d(),a.off("load error onreadystatechange")}).attr("src",b)},c=function(a){var b,c=window.innerWidth||!1;return b="skinny"===oMQ.getContext()?window.devicePixelRatio>1||c>800?a.large:a.medium:"mobile"===oMQ.getContext()?window.devicePixelRatio>1||innerwidth>400?a.medium:a.small:window.devicePixelRatio>1?a.xlarge:a.large},d=600,e={slideRight:{inbound:{className:"slideInRight",fallback:function(a){return a.css({left:"15px",opacity:0}),a.animate({left:"0",opacity:1},d)}},outbound:{className:"slideOutLeft",fallback:function(a){return a.css({left:"0"}),a.animate({left:"-15px"},d)}}},slideLeft:{inbound:{className:"slideInLeft",fallback:function(a){return a.css({left:"-15px",opacity:0}),a.animate({left:"0",opacity:1},d)}},outbound:{className:"slideOutRight",fallback:function(a){return a.css({left:"0"}),a.animate({left:"15px"},d)}}}},f=function(a){var b=this;return b._index=0,b._lastIndex=0,a&&(b._hash=a.data,b._hasData=!0),this};f.prototype={reset:function(){var a=this;a._hash=!1,a._hasData=!1,a._index=0},getIndex:function(){var a=this;return a._index},setIndex:function(a){var b=this,c=b.getLength();return a>c-1&&(a=c-1),0>=a&&(a=0),b._lastIndex=b._index,b._index=a,b._index},getLastIndex:function(){var a=this;return a._lastIndex},getLength:function(){var a=this;return a._hash.length},getItem:function(a){var b=this;return arguments.length||(a=b.getIndex()),0>a?b._hash[b.getLength()-1]:a>b.getLength()-1?b._hash[0]:b._hash[a]},render:function(a){return a?this.renderMethod(a):!1},renderMethod:function(){return $(document.createElement("img"))}};var g=function(a){var b=this,c=$(window);if(b.$el=a.$el,b.el=b.$el.get(0),b.$el.data("isNonStick"))return b.remove();if(b.domId=b.$el.attr("data-teflon-id"),b.$el.data("isNonStick",!0),b.useTransform=Browser.get("cssPrefix"),b.transformProperty=b.useTransform?Browser.get("getPrefixedCssProp")+"-transform":"marginLeft",b.transitionProperty=Browser.get("getPrefixedCssProp")+"-transition",b.transitionEvent=Browser.get("animationEvent"),b.preloadNextItems=!0,$parent=b.$el.parent(),$nav_parent=$(document.getElementById("nav_"+$parent.attr("id"))),b.$arrowNext=$nav_parent.find(b.arrowNext),b.$arrowBack=$nav_parent.find(b.arrowBack),b.$list=b.$el.find(b.listSelector),b.getFirst(),b.getLast(),b.touch=Browser?Browser.has("touchEvents"):!1,a.items&&a.items.length>1&&b.touch&&(b.$el.on("drag",$.proxy(b.onDrag,b)),b.$el.on("dragstart",$.proxy(b.onDragStart,b)),b.$el.on("dragend dragleave release",$.proxy(b.onDragEnd,b))),b.$el.hammer(),b.$arrowNext.on("click",$.proxy(b.onTap,b)),b.$arrowBack.on("click",$.proxy(b.onTap,b)),b.$el.on("click",$.proxy(b.onTap,b)),b.container={},a.items){b.dataSource=new f({data:a.items});var d=b.$first.data("index");d&&b.dataSource.setIndex(d-1)}return a.itemRenderMethod&&(b.dataSource.renderMethod=a.itemRenderMethod),a.animationDuration&&(b.animationDuration=a.animationDuration),"undefined"!=typeof b.$el.attr("data-teflon-clickable")&&(b.canNavigate=!0,b.$el.addClass("teflon--clickable")),b.render(),a.items&&c.trigger("teflon:initComplete",[b.dataSource.getItem(0),b.$first.parent()]),b.$el.on("teflon:beforeImageLoad",$.proxy(this.onBeforeImageLoad,this)),b.$el.on("teflon:imageLoaded",$.proxy(this.onNewImageLoaded,this)),b};return g.prototype={arrowNext:"[data-teflon-next]",arrowBack:"[data-teflon-back]",listSelector:"[data-teflon-list]",itemSelector:".teflon_image",itemLoadingClass:"teflon__item--loading",dragVelocityThreshold:.5,dragScreenPercentage:20,dragStart:0,dragCurrent:0,itemsToShow:1,debug:!1,animationDuration:d,onTap:function(a){var b=a.target,c=this;if(b===c.$arrowBack.get(0))c.back();else if(b===c.$arrowNext.get(0))c.next();else{if(b.hasAttribute("data-teflon-preventdefault"))return a.preventDefault(),a.stopPropagation(),!1;if(c.canNavigate){var d=c.dataSource.getItem();d.url&&($(window).trigger("teflon:beforeRedirect",[d]),window.location=d.url)}}a.preventDefault()},onDragStart:function(a){var b=this;b.isAnimating||b.dragStartTime||(b.debug&&console.log("dragStart: ",a),b.dragStartTime=+new Date,b.getDeltaThreshold(),b.isAnimating=!1,b.lastDelta=0,b.wasSwapped=!1,b.wasRendered=!1,b.shouldTransition=!1,b.lockWindow(),b.dragEnded=!1,$("body").one("mouseleave",function(a){(a.relatedTarget===document.querySelector("html")||a.currentTarget===document)&&b.onDragEnd()}),a.stopPropagation())},lockWindow:function(){$(document).on("touchmove",!1)},unlockWindow:function(){$(document).off("touchmove",!1)},onDrag:function(a){{var b=this,c=0;b.dataSource.getIndex()}return a.stopPropagation(),a.gesture?b.dragStartTime?void(b.isAnimating||(a.gesture&&(c=a.gesture.deltaX),b.debug&&console.log("onDrag: lastDelta",b.lastDelta,"delta: ",c))):(b.$el.trigger("mouseup"),!1):(b.onDragEnd(),!1)},onDragEnd:function(a){var b,c,d;return b=this,c=0,a&&a.gesture&&(c=a.gesture.deltaX),b.dragEnded?!1:(b.dragEnded=!0,d=b.shouldTransitionAfterDrag(c),b.isAnimating?void 0:(d&&b.go(d),b.debug&&console.log("DRAG END"),b.dragStartTime=!1,b.unlockWindow(),a.stopPropagation(),a.preventDefault(),d))},reallyGreaterThanZero:function(a,b){if(0===a){if(0>b)return!0}else if(a+1>0)return!0;return!1},shouldTransitionAfterDrag:function(a){{var b=this,c=+new Date,d=c-b.dragStartTime,e=a/d,f=b.dataSource.getIndex();b.dataSource.getLength(),b.reallyGreaterThanZero(f,a)}return b.dragThreshold?(b.debug&&console.log("delta",a,"dragThreshold",b.dragThreshold,b.dragVelocityThreshold,e),a>0&&a>=b.dragThreshold||e>b.dragVelocityThreshold?b.shouldTransition=-1:(0>a&&a<=-b.dragThreshold||e<-b.dragVelocityThreshold)&&(b.shouldTransition=1),b.shouldTransition?b.shouldTransition:!1):(b.shouldTransition=!1,!1)},getDeltaThreshold:function(){var a,b=this,c=b.$el.width();a=c/2.5,b.dragThreshold=a,b.dragWidth=c},next:function(){this.go(1)},back:function(){this.go(-1)},go:function(a){var b=this,c=b.dataSource.getIndex(),d=b.dataSource.getLength()-1,e=c;b.isAnimating||(a>0?(e=c+1,e>d&&(e=0)):0>a&&(e=c-1,0>e&&(e=d)),console.log(e),this.showItem(e,a))},snap:function(){var a=this,b=a.dataSource.getIndex();this.showItem(b,0)},showItem:function(a,b){var c,d=this,e=0,f=d.dataSource.getLength()-1;d.isAnimating||(b>0?f>=a?(e=-100,c=d.getLast()):e=0:0>b?(e=0,(0===d.currentX||-100===d.currentX)&&d.moveTo(-100),d.wasSwapped||d.swapContainerOrder(),c=d.getFirst()):d.lastDelta>0&&d.wasSwapped?(d.shouldSwapBackAtEnd=!0,e=-100):e=0,d.debug&&console.log("showItem: newLeft",e,"wasRendered",d.wasRendered),c&&c.length&&(d.debug&&console.log("showItem: rendering item"),d.render(c,a),d.wasRendered=!0),d.newLeft=e,d.newIndex=a,d.newDirection=b,d.dataSource.setIndex(d.newIndex))},onBeforeImageLoad:function(){var a=this;a.$el.addClass("teflon--loading")},onNewImageLoaded:function(){var a=this;a.$el.removeClass("teflon--loading"),a.animateTo(a.newLeft,a.newIndex,a.newDirection),a.dataSource.setIndex(a.newIndex)},moveTo:function(a){{var b=this;b.$list}b.currentX=a},animateTo:function(a,b,c){var d,f=this,g=f.$list;if($(window).trigger("teflon:beforeAnimationStart",[f.dataSource.getItem(b),g]),f.isAnimating=!0,d=c>0?e.slideRight:e.slideLeft,f.currentX=a,f.useTransform)return animationEvent=this.transitionEvent,f.getFirst().one(animationEvent,function(){$.proxy(f.onAnimationComplete(b,c,g,d),f)}),c>0?(f.getFirst().addClass(d.outbound.className),f.getLast().addClass(d.inbound.className)):(f.getFirst().addClass(d.inbound.className),f.getLast().addClass(d.outbound.className)),document.body.offsetLeft;if(c>0)var h=[d.outbound.fallback(f.getFirst()),d.inbound.fallback(f.getLast())];else var h=[d.inbound.fallback(f.getFirst()),d.outbound.fallback(f.getLast())];$.when.apply($,h).done(function(){$.proxy(f.onAnimationComplete(b,c,g,d),f)})},onAnimationComplete:function(a,b,c,d){var e=this,c=e.$list,f=e.dataSource.getLength();if(e.isAnimating)return e.useTransform?e.$first.add(e.$last).removeClass(d.outbound.className+" "+d.inbound.className):(e.$first.attr("style",""),e.$last.attr("style","")),e.debug&&console.log("onAnimationComplete:"),e.wasContainerOrderSwapped=!1,e.$list.css(e.transformProperty,""),(b>0&&a!==f||e.shouldSwapBackAtEnd)&&(e.debug&&console.log("onAnimationComplete: swap list elements"),e.swapContainerOrder(),e.shouldSwapBackAtEnd=!1),e.getLast().html("").attr("data-index",""),c.off(e.transitionEvent),e.transitionProperty&&c.css(e.transitionProperty,""),e.isAnimating=!1,e.wasSwapped=!1,$(window).trigger("teflon:animationComplete",[e.dataSource.getItem(a),c]),console.log("indexAtEnd "+e.dataSource.getIndex()+" / "+e.newIndex+" / "),c},getFirst:function(){var a=this;return a.$first=a.$list.find("li").first(),a.$first},getLast:function(){var a=this;return a.$last=a.$list.find("li").last(),a.$last},swapContainerOrder:function(){var a=this,b=a.getFirst(),c=a.getLast();b.before(c),a.wasContainerOrderSwapped=!0,a.debug&&console.log("swapContainerOrder: Swapped")},render:function(a,b){var c=this;if(c.dataSource)return a||(a=c.$first),void 0===b&&(b=c.dataSource.getIndex()),c.renderItem(a,b),c},renderItem:function(a,d){var e,f,g=this,h=g.dataSource.getItem(d),i=g.dataSource.getItem(d+1),j=(g.$el,g.$list,g.$el.attr("data-teflon-index")||0);if(j===d)return!1;e=g.dataSource.render(h),f=g.dataSource.render(i),a.html(e),g.$el.attr("data-teflon-index",d);try{g.$el.trigger("teflon:beforeImageLoad"),b(e,c(h),function(){var a=e.parents("."+g.itemLoadingClass);if(a.removeClass(g.itemLoadingClass),g.$el.trigger("teflon:imageLoaded"),g.preloadNextItems){var h=g.dataSource.getItem(d-1),j=g.dataSource.render(h);b(f,c(i),function(){}),b(j,c(h),function(){})}})}catch(k){}return h},remove:function(){return this.$list.off(),this.$first.off(),this.$last.off(),this.$el.off(),this.onAnimationComplete=null,this.$list=null,this.$arrowNext=null,this.$arrowBack=null,this.dataSource=null,this.$first=null,this.$last=null,this.$el=null,this.el=null,!1}},a}();